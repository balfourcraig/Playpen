<!DOCTYPE html>
<html lang="en-nz">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta charset="UTF-8">
	<title>Colors - Craig's Playpen</title>
	<link rel="stylesheet" href="../css/styles.css">
	<style>
		.colorBlock{
			width: 100%;
			height: 20px;
			margin: 5px;
		}
	</style>
	<script>
		const golden_ratio= 0.618033988749895;
		let goldenOffset = golden_ratio;
		let randh = Math.random();
		let rands = Math.random();


		function getRandomInt(min, max) {
			min = Math.ceil(min);
			max = Math.floor(max);
			return Math.floor(Math.random() * (max - min + 1)) + min;
		}
		

		function goldenRand(minSat, maxSat){
			randh += goldenOffset;
			randh %= 1;
			
			rands += goldenOffset  *0.5;
			rands %= 1;
			
			let sat = (maxSat - minSat) * rands + minSat;
			
			return 'hsl(' + (randh * 360) + ', ' + sat + '%, 50%)';
		}
		
		function hsvToRGB(h, s, v){
			let h_i = ~~(h*6);
			let f = h*6 - h_i;
			let p = v * (1-s);
			let q = v * (1 - f*s);
			let t = v * (1 - (1 -f) * s);
			
			let r = 0;
			let g = 0;
			let b = 0;
			
			switch (h_i){
				case 0:
					r = v; g = t; b = p;
					break;
				case 1:
					r = q, g = v; b = p;
					break;
				case 2:
					r = p; g = v; b = t;
					break;
				case 3:
					r = p; g = q; b = v;
					break;
				case 4:
					r = t; g = p; b = v;
					break;
				case 5:
					r = v; g = p; b = q;
			}
			
			r = ~~(r * 255);
			g = ~~(g * 255);
			b = ~~(b * 255);
			
			let color = '#';
			if(r < 16)
				color += '0';
			color += r.toString(16);
			if(g < 16)
				color += '0';
			color += g.toString(16);
			if(b < 16)
				color += '0';
			color += b.toString(16);
			
			return color;
		}
		

		function drawPattern(){
			const holder = document.getElementById('resultHolder');
			const sat1 = parseInt(document.getElementById('satMinInput').value);
			const sat2 = parseInt(document.getElementById('satMaxInput').value);
			
			const satMin = Math.min(sat1, sat2);
			const satMax = Math.max(sat1, sat2);
			
			console.log(rands);
			
			
			holder.innerHTML = '';
			//goldenOffset *= (Math.random() > 0.5 ? 1 : -1);
			for(let i = 0; i < 50; i++){
				const block = document.createElement('div');
				block.setAttribute('class', 'colorBlock');
				block.setAttribute('style', 'background-color:' + goldenRand(satMin, satMax));
				holder.appendChild(block);
			}
		}
		
		window.addEventListener('DOMContentLoaded', () => {
			document.getElementById('drawBtn').addEventListener('click', drawPattern);
			
			document.getElementById('satMinInput').addEventListener('input', () => {
				document.getElementById('satMinLbl').innerText = 'Min Saturation (' + document.getElementById('satMinInput').value + '%)';
			});
			
			document.getElementById('satMaxInput').addEventListener('input', () => {
				document.getElementById('satMaxLbl').innerText = 'Max Saturation (' + document.getElementById('satMaxInput').value + '%)';
			});
		});
	</script>
	<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico" />
</head>
<body>
<div class="navHolder">
	<nav>
		<a href="../index.html">Home</a>
		<a class="selected" href="../ramblings.html">Deranged Ramblings</a>
		<a href="../about.html">About</a>
	</nav>
</div>

<main>
	<div class="pageWidth">
		<header>
			<h1>Pentagram</h1>
		</header>
		<section>
			<input id="satMinInput" type="range" min="1" max="100" value="95">
			<label id="satMinLbl" for="satMinInput">Min Saturation</label>
			<br>
			<input id="satMaxInput" type="range" min="1" max="100" value="85">
			<label id="satMaxLbl" for="satMaxInput">Max Saturation</label>
			<br>
			<button id="drawBtn">Draw!</button>
			<button id="stopDrawingBtn" style="display:none">STOP</button>

			<div id="resultHolder">
			
			</div>
		</section>
		<div class="scrollOverflow"></div>
	</div>
</main>
</body>
</html>