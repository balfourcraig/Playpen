<!DOCTYPE html>
<html lang="en-nz">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta charset="UTF-8">
	<title>Colors - Craig's Playpen</title>
	<link rel="stylesheet" href="../css/styles.css">
	<style>
		.colorBlock{
			min-width: 10px;
			height: 15px;
			margin: 0;
			flex-grow: 1;
		}
		
		#resultHolder{
			display: flex;
			flex-wrap: wrap;
		}
	</style>
	<script src="../scripts/utils.js"></script>
	<script>
		let width = Math.random();
		
		let animationID = null;

		function goldenRand(minSat, maxSat, minLight, maxLight){
			randh += golden_ratio;
			randh %= 1;
			
			let sat = getRandomInt(minSat, maxSat);
			let light = getRandomInt(minLight, maxLight);
			
			return 'hsl(' + (randh * 360) + ', ' + sat + '%, ' + light + '%)';
		}
		
		function drawPattern(){
			window.cancelAnimationFrame(animationID);
			const holder = document.getElementById('resultHolder');
			
			const animate = document.getElementById('animateInput').checked;
			
			const sat1 = parseInt(document.getElementById('satMinInput').value);
			const sat2 = parseInt(document.getElementById('satMaxInput').value);
			
			const light1 = parseInt(document.getElementById('lightMinInput').value);
			const light2 = parseInt(document.getElementById('lightMaxInput').value);
			
			const satMin = Math.min(sat1, sat2);
			const satMax = Math.max(sat1, sat2);
			
			const lightMin = Math.min(light1, light2);
			const lightMax = Math.max(light1, light2);
			
			const rows = parseInt(document.getElementById('rowInput').value)
			holder.innerHTML = '';
			
			const drawings = [];
			for(let i = 0; i < rows; i++){
				drawings.push(() => {
					const block = document.createElement('div');
					
					//width += golden_ratio;
					//width %= 1;

					block.setAttribute('class', 'colorBlock');
					block.setAttribute('style', 'background-color:' + goldenRand(satMin, satMax, lightMin, lightMax) + '; width:' + (Math.floor(Math.random() * 50 + 5)) + '%');
					holder.appendChild(block);
				});
			}
			if(animate){
				animationID = window.requestAnimationFrame(() => {
					drawBlock(drawings, 0);
				});
			}
			else{
				for(let i = 0; i < drawings.length; i++){
					drawings[i]();
				}
			}
			
		}
		
		function drawBlock(drawings, index){
			if(index < drawings.length){
				drawings[index]();
				animationID = window.requestAnimationFrame(() => {
					drawBlock(drawings, index + 1);
				});
			}
		}
		
		window.addEventListener('DOMContentLoaded', () => {
			document.getElementById('drawBtn').addEventListener('click', drawPattern);
			
			document.getElementById('satMinInput').addEventListener('input', () => {
				document.getElementById('satMinLbl').innerText = 'Min Saturation (' + document.getElementById('satMinInput').value + '%)';
			});
			
			document.getElementById('satMaxInput').addEventListener('input', () => {
				document.getElementById('satMaxLbl').innerText = 'Max Saturation (' + document.getElementById('satMaxInput').value + '%)';
			});
		});
	</script>
	<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico" />
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-160042243-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-160042243-1');
	</script>
</head>
<body>
<div class="navHolder">
	<nav>
		<a href="../index.html">Home</a>
		<a class="selected" href="../ramblings.html">Deranged Ramblings</a>
		<a href="../about.html">About</a>
	</nav>
</div>

<main>
	<div class="pageWidth">
		<header>
			<h1>Pentagram</h1>
		</header>
		<section>
			<input id="animateInput" type="checkbox" checked>
			<label for="animateInput">Animate</label>
			<br>
			<input id="satMinInput" type="range" min="1" max="100" value="75">
			<label id="satMinLbl" for="satMinInput">Min Saturation</label>
			<br>
			<input id="satMaxInput" type="range" min="1" max="100" value="95">
			<label id="satMaxLbl" for="satMaxInput">Max Saturation</label>			
			<br>
			
			<input id="lightMinInput" type="range" min="1" max="100" value="35">
			<label id="lightMinLbl" for="lightMinInput">Min Lightness</label>
			<br>
			<input id="lightMaxInput" type="range" min="1" max="100" value="65">
			<label id="lightMaxLbl" for="lightMaxInput">Max Lightness</label>
			<br>
			
			<input id="rowInput" type="number" min="1" value="200">
			<label for="rowInput">Number of Blocks</label>
			<br>
			
			<button id="drawBtn">Draw!</button>
			<button id="stopDrawingBtn" style="display:none">STOP</button>

			
			
			<div id="resultHolder">
			
			</div>
		</section>
		<div class="scrollOverflow"></div>
	</div>
</main>
</body>
</html>